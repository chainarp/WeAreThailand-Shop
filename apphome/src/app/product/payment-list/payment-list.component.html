<!-- Head Section -->
<div class="head-section bg">
    <div class="container">
        <h4>Shopping
            <span class="font-light">Cart</span>
        </h4>
        <p>WeChef (Thailand) - Shopping Cart</p>
    </div>
</div>

<div class="container-page">
    <div class="box-page">
        <!-- Start List -->

        <ul class="row list-justify">
            <li class="col s3 active">
                Cart
            </li>
            <!-- <li class="col s3 active">
                Payment
            </li> -->
            <li class="col s3 disabled">
                Delivery
            </li>
            <li class="col s3 disabled">
                Receipt
            </li>
        </ul>

        <!-- End List -->
        <div class="row margin-top30">
            <div class="col l8 s12">
                <div *ngIf="!isCartContainedThing()">
                    <!--
                    <ion-row>
                        <ion-icon class="empty-cart" name="cart"></ion-icon>
                    </ion-row>
                    -->
                    <h4>Your Cart is empty!</h4>
                    <button ion-button class="continue-btn" (click)="gotoShoppingTabsPage()">{{'Add Items'}}</button>
                </div>
                <table class="table-cart">
                    <tbody>
                        <tr *ngFor="let cart of cartServiceProvider.shoppingCart">
                            <td>
                                <span class="item-count">
                                    <p class="item-name">{{cart.sellerTitle}} ({{cart.sellerCode}})</p>
                                    <p class="item-detail" text-wrap>ที่จัดส่ง : {{cart.customerLocationTitle}} ({{cart.sellerDistance}} กม.)</p>
                                    <p class="item-detail" text-wrap>เวลา : {{cart.selectedDeliveryTimePreroid.startDate }} - {{cart.selectedDeliveryTimePreroid.endDate}}
                                    </p>
                                    <p class="item-detail" text-wrap>ราคารวม : {{cart.totalCostOfGoods}} บาท</p>
                                </span>


                                <table class="table-cart">
                                    <tr *ngFor="let selectedProductItem of cart.selectedProductItems">
                                        <td col-2>
                                            <button (click)="cartServiceProvider.removeFromShoppingCart(selectedProductItem,true)">
                                            </button>
                                        </td>
                                        <td col-10>

                                            <tr>
                                                <td col-4>
                                                    <!-- class="responsive-img" -->
                                                    <img width="300" alt="" src={{selectedProductItem.productItemImage}} alt="">
                                                </td>
                                                <td col-6>
                                                    <p class="item-name">{{selectedProductItem.productItemTitle}}</p>
                                                    <p class="item-detail" text-wrap>{{selectedProductItem.selectedItemPrice.name}}</p>

                                                    <p class="item-detail" text-wrap>เพิ่ม: {{selectedProductItem.selectedExtraOptionsComma}}</p>

                                                    <p class="item-detail" text-wrap>ราคา/ชุด: {{selectedProductItem.totalPricePerSet}} บาท</p>
                                                    <p class="item-detail" text-wrap>จำนวน: {{selectedProductItem.requiredQuantity}} ชุด</p>
                                                    <p class="item-detail" text-wrap>ราคารวม: {{selectedProductItem.totalAmount}} บาท</p>
                                                    <tr>
                                                        <span class="item-count" (click)="cartServiceProvider.removeFromShoppingCart(selectedProductItem,false)">
                                                            -
                                                        </span>
                                                        <span class="item-count show-count">
                                                            {{selectedProductItem.requiredQuantity}}
                                                        </span>
                                                        <span class="item-count" (click)="cartServiceProvider.addToShoppingCart(selectedProductItem,true)">
                                                            +
                                                        </span>
                                                    </tr>
                                                </td>
                                            </tr>

                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <!--
                            <tr *ngFor="let selectedProductItem of cart.selectedProductItems">

                                <td col-2>
                                    <button (click)="cartServiceProvider.removeFromShoppingCart(selectedProductItem,true)">
                                    </button>
                                </td>
                                <td col-10>
                                    <!--
                                    <tr>
                                        <td col-4>
                                            <!-- item-image - - >
                                            <img class="responsive-img" src={{selectedProductItem.productItemImage}} alt="">
                                        </td>
                                        <td col-6>
                                            <p class="item-name">{{selectedProductItem.productItemTitle}}</p>
                                            <p class="item-detail" text-wrap>{{selectedProductItem.selectedItemPrice.name}}</p>

                                            <p class="item-detail" text-wrap>เพิ่ม: {{selectedProductItem.selectedExtraOptionsComma}}</p>
                                            <!-- <p class="item-detail" text-wrap>จำนวน: {{selectedProductItem.requiredQuantity}}</p> - - >
                                            <p class="item-detail" text-wrap>ราคา/ชุด: {{selectedProductItem.totalPricePerSet}} บาท</p>
                                            <p class="item-detail" text-wrap>จำนวน: {{selectedProductItem.requiredQuantity}} ชุด</p>
                                            <p class="item-detail" text-wrap>ราคารวม: {{selectedProductItem.totalAmount}} บาท</p>
                                            <tr>
                                                <span class="item-count" (click)="cartServiceProvider.removeFromShoppingCart(selectedProductItem,false)">
                                                    -
                                                </span>
                                                <span class="item-count show-count">
                                                    {{selectedProductItem.requiredQuantity}}
                                                </span>
                                                <span class="item-count" (click)="cartServiceProvider.addToShoppingCart(selectedProductItem,true)">
                                                    +
                                                </span>
                                            </tr>
                                        </td>
                                    </tr>
                                - ->
                                </td>
                            </tr> -->

                    </tbody>
                </table>
                <div class="row margin-top20">
                    <div class="col l6 push-l6 s12 right-align">
                        <button [disabled]="formRef.invalid || touched" type="submit" mat-button class="btn btn-primary margin-bottom10">
                            <span *ngIf="nottouched">Continue to Checkout</span>
                            <span *ngIf="touched">Loading...</span>
                        </button>
                    </div>
                    <div class="col l6 pull-l6 s12">
                        <a mat-button routerLink="/shop/cart" class="btn btn-default">Back To Cart</a>
                    </div>
                </div>
            </div>

            <!--
            <div class="col l8 s12">

                <!-- Start Table Cart - - >
            <table class="table-cart">
                <thead>
                    <tr>
                        <th>Added Items</th>
                        <th>Quantity</th>
                        <th>Price</th>
                        <th>Remove</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngIf="productsOrder.length == 0">
                        <td class="empty" colspan="4">
                            <img src="http://via.placeholder.com/246x339" width="100" alt="" />
                            <h6 class="content">No Product</h6>
                        </td>
                    </tr>
                    <tr *ngFor="let product of productsOrder">
                        <td class="item">
                            <div class="wrap-img">
                                <img [src]="product.image" alt="" />
                            </div>
                            <h6 class="title">
                                <a [routerLink]="['/shop/p/' + product.slug]">{{product.productName}}</a>
                            </h6>
                            <p>Stock: {{product.stock}}</p>
                        </td>
                        <td>
                            <input type="number" class="input-counter" [(ngModel)]="product.quantity" [value]="product.quantity" (change)="onChage(product)"
                            />
                        </td>
                        <td>{{product.quantity * product.price | currency:'USD':'$'}}</td>
                        <td>
                            <button mat-mini-fab (click)="deleteProduct(product.id)">
                                <mat-icon>&#xE5CD;</mat-icon>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <!-- End Table Cart - - > 
        </div>
        -->
            <div class="col l4 s12">

                <!-- Coupon -->
                <div class="input-group">
                    <input [disabled]="productsOrder.length == 0" type="text" [value]="promoInit" placeholder="Add Promo Code" #promo />
                    <mat-icon (click)="checkPromo(promo.value)" class="icon">&#xE145;</mat-icon>
                </div>

                <div *ngIf="productsOrder.length != 0" class="margin-bottom20 margin-top20">
                    <p class="margin-bottom10">
                        <em>
                            <small>try promo code for test</small>
                        </em>
                    </p>
                    <div class="alert alert-info">
                        <strong class="right">4234OPD</strong> Free 20%
                        <hr />
                        <strong class="right">12312B</strong> Free $100
                    </div>
                </div>

                <div class="margin-top20 margin-bot20">
                    <table class="count">
                        <tr>
                            <td>Sub Total</td>
                            <td class="right-align">{{subTotal | currency:'USD':'$'}}</td>
                        </tr>
                        <tr>
                            <td>Promo</td>
                            <td class="right-align">{{promoValue | currency:'USD':'$'}}</td>
                        </tr>
                        <tr>
                            <td>Total Price</td>
                            <td class="right-align">
                                <strong>{{total | currency:'USD':'$'}}</strong>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="margin-top20">
                    <button [disabled]="cartServiceProvider.shoppingCart.cartElements.length == 0" mat-button routerLink="/shop/shipping" class="btn btn-primary btn-block">Continue Shipping</button>
                </div>
            </div>
        </div>

    </div>
</div>